!function(n,t,e){"use strict";n.bindEvents=function(){var i,o;t("*[contenteditable]").on("focus",function(){i=t(this).html()}).on("keyup paste",function(){if(i!=t(this).html()){clearTimeout(o);var e=t(this)[0];o=setTimeout(function(){n.onContentEdited(e)},500)}}),e.on("instanceReady",function(n){t(n.editor.element.$).append('<i class="fa fa-pencil editable-affordance"></i>')})}}(window.omniclopse=window.omniclopse||{},$,CKEDITOR),function(n){"use strict";n.ux=n.ux||{};var t=function(n,t,e){n.classList.remove(t),n.classList.add(e)};n.ux.saveContentStarted=function(n){t(n,"fa-pencil","fa-save")},n.ux.saveContentCompleted=function(n){t(n,"fa-save","fa-check"),setTimeout(function(){t(n,"fa-check","fa-pencil")},3e3)},n.ux.saveContentFailed=function(n){t(n,"fa-save","fa-times")}}(window.omniclopse=window.omniclopse||{}),function(n,t){"use strict";var e=function(){return t(".panel").map(function(n,e){var i=t(e).find("h1"),o=t(e).find(".panel-body");return{title:i?i.text():"",body:o?o.html():""}}).get()};n.onContentEdited=function(i){var o=t(i).find("i")[0];n.ux.saveContentStarted(o);var a=e(),c={panels:a};t.ajax({url:"/pages/home",dataType:"json",contentType:"application/json",data:JSON.stringify(c),type:"PUT"}).fail(function(){n.ux.saveContentFailed(o)}).done(function(){n.ux.saveContentCompleted(o)})}}(window.omniclopse=window.omniclopse||{},$);